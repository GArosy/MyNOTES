## 跨域

跨域问题产生的根源在于**浏览器需要遵循同源策略**，在它的限制下，前后端只有在**协议**、**域名**、**端口**都相同时才能交换数据。所以在**前后端分离**的项目中我们必须要**规避**这种限制。

### Proxy

我们前端在开发过程中解决跨域最常用的方法是在项目中**配置代理服务器**，利用了**服务器间通讯没有跨域问题**的机制，**使用代理服务器转发请求**，过程概括为：

1. 在`vue.config.js` 中配置`devServer.proxy`，添加一个**代理标识**对象，例如 `"api":{}` 。填入要代理的路径target，设置`changeOrigin`字段为true。如果请求url中含有代理标识，就触发代理机制， 发送的请求路径会被拼接为 target + 代理标识 + url ；
2. 在Axios中配置请求前缀baseURL为代理标识，这样使用axios发送请求会自动经过代理服务器；
3. 如果不想让代理标识出现在请求url中，可以在`pathRewrite`字段中将代理标识替换成空字符串。

使用devServer的问题是他仅适用于开发环境，当Vue项目打包成静态文件时，他的代理也就失灵了。在生产环境中，可以在**使用nginx的反向代理**达到同样的效果。

### CORS

现在在生产环境中使用的主流解决方案是 **CORS 跨域资源共享** ，它是一种**基于HTTP协议头**的机制，通过服务器在响应头**声明白名单**，使得浏览器允许白名单内的源访问加载自己的资源。

通常在服务器配置响应头 `Access-Control-Allow-Origin: *`  即可解决大部分解决前后端分离项目的跨域问题。

>  [一文弄懂 CORS 跨域(前端+后端代码实例讲解) - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/118381660) 



## webpack





## CJS 与 ESM

`CommonJS`和`ESModule`都是JavaScript的**模块化方案**

### CJS

ConmmonJS主要用于服务器端，**只能在NodeJS上运行**，使用 `require('MODULE')` 读取并加载模块。

### ESM

ESModule是最新的模块方案，使用 `import` `export` 管理模块。

### 区别

- CJS**同步**加载模块，在执行时才会对模块建立对象的**拷贝**；

- ESM**提前**加载模块并编译，建立**静态引用**，所以import只能放在文件**开头**，不能放在条件语句内（而且不允许在外部直接修改模块的值）；基于这个差异，ESM在打包阶段更好做`tree-shaking`。



## BFC

**Block Formatting Context 块级格式化上下文** 

### 概念

BFC与IFC、FFC等概念同属于CSS**格式化上下文**的一种，实质是一种**布局环境**，它们规定了内部的box如何布局，从而形成了独立的渲染区域。

### 布局规则

- BFC内部的盒子从包含块的顶部，一个接着一个地放置**垂直排列**；
- BFC内部的盒子的**margin**紧贴包含块的**border**；
- 计算创建BFC的盒子高度时**会将浮动元素也计入其中**；

### 特性

通过为容器**创建BFC**可以使它成为**独立容器，与外界互不影响**：

- **包含内部浮动**，避免溢出导致浮动子元素令父元素高度坍塌；
- **排除外部浮动**，避免被覆盖；
- **避免外边距坍塌**，属于同一个BFC的相邻盒子垂直方向margin会重叠，将其放在不同的 BFC 容器中即可避免；

### 创建

创建BFC的方式有很多：

- 根元素
- 浮动元素（float不为none）
- 绝对定位元素（position为absolute或fixed）
- 表格元素
- 弹性元素、网格元素（display为flex/grid的直接子元素）
- `overflow` 不为visible的块元素

以上方法在某些情况下可能会产生**副作用**，如果要为一个容器专门创建BFC，建议使用的是 **`display: flow-root`** 属性，它可以创建无副作用的 BFC。

>  [块格式化上下文 - Web 开发者指南 | MDN (mozilla.org)](https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context) 
>
>  [视觉格式化模型 - CSS（层叠样式表） | MDN (mozilla.org)](https://developer.mozilla.org/zh-CN/docs/Web/CSS/Visual_formatting_model) 
>
>  [Formatting context（FC） - 掘金 (juejin.cn)](https://juejin.cn/post/6974636270848835592) 
>
> block-level element =>  block-level box 块级元素生成块级盒子，如果**块级盒子**同时也是一个**块容器盒子 block container box **，则称其为**块盒子 block box **，